<!DOCTYPE html><html lang="ko-KR" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="MariaDB / MySQL 설치" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="누가의 개발로그" /><meta property="og:description" content="누가의 개발로그" /><link rel="canonical" href="https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/" /><meta property="og:url" content="https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/" /><meta property="og:site_name" content="NUGALOG" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-03T00:00:51+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MariaDB / MySQL 설치" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-05-04T00:15:10+09:00","datePublished":"2022-05-03T00:00:51+09:00","description":"누가의 개발로그","headline":"MariaDB / MySQL 설치","mainEntityOfPage":{"@type":"WebPage","@id":"https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/"},"url":"https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/"}</script><meta property="og:image" content="/assets/img/common/ogimage.png"><title>MariaDB / MySQL 설치 | NUGALOG</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="NUGALOG"><meta name="application-name" content="NUGALOG"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5YTBXLHM1V"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5YTBXLHM1V'); }); </script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar"> <img src=" https://cdn.jsdelivr.net/gh/nugaBox/nugabox.github.io/assets/img/avatar/nuga_profile_2022.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/"><img src="/assets/img/common/banner_sub.png" alt="NUGALOG"></a></div><div class="site-subtitle"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://nugabox.com/" aria-label="home" target="_blank" rel="noopener"> <i class="fas fa-home"></i> </a> <a href="https://github.com/nugaBox" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.rocketpunch.com/@nugabox" aria-label="rocketpunch" target="_blank" rel="noopener"> <i class="fas fa-rocket"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['root','nugabox.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>MariaDB / MySQL 설치</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MariaDB / MySQL 설치</h1><div class="post-meta text-muted"><div> By <em> <a href="https://nugabox.com">NUGA</a> </em></div><div class="d-flex"><div> <span> 게시 <em class="timeago" data-ts="1651503651" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-05-03 </em> </span> <span> 업데이트 <em class="timeago" data-ts="1651590910" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-05-04 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2314 단어"> <em>12 분</em>읽는 시간</span></div></div></div><div class="post-content"><p><img data-src="https://cdn.jsdelivr.net/gh/nugaBox/nugabox.github.io/assets/img/post/2022-05-03/mysql.png" alt="mariadb/mysql" style="border:1px solid #606060; border-radius: 7px; padding: 0px;" data-proofer-ignore></p><h3 id="시험-환경"><span class="mr-2">시험 환경</span><a href="#시험-환경" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><blockquote><ul><li><p>OS : CentOS 6.x / 7.x</p><li><p>DB : MariaDB 10.0, 10.2 / MySQL 5.1, 5.7, 8.0</p></ul></blockquote><h1 id="os-설정">OS 설정</h1><hr /><h2 id="1-ulimit-수정"><span class="mr-2">1. ulimit 수정</span><a href="#1-ulimit-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>현재 시스템 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    vim /etc/security/limits.conf
</pre></table></code></div></div><ul><li>전체 사용자의 nofile 옵션을 추가</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="k">*</span>               soft    nofile          65535
    <span class="k">*</span>               hard    nofile          65535
</pre></table></code></div></div><h2 id="2-hostname-변경"><span class="mr-2">2. Hostname 변경</span><a href="#2-hostname-변경" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>여러 대의 DB를 관리해야 하거나, 마스터-슬레이브 구조로 관리해야 될 때는 각 서버가 Hostname을 갖고 있는 것이 유리하다.</p><ul><li>CentOS 6.x</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    vim /etc/sysconfig/network
    	<span class="nv">HOSTNAME</span><span class="o">=</span>호스트네임
</pre></table></code></div></div><ul><li>CentOS 7.x</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    hostnamectl set-hostname 호스트네임 <span class="nt">--static</span>
    <span class="nb">cat</span> /etc/hostname
    reboot
</pre></table></code></div></div><h2 id="3-서버-시간-설정"><span class="mr-2">3. 서버 시간 설정</span><a href="#3-서버-시간-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>서버의 시간이 UTC로 설정된 경우 KST로 변경한다. (UTC는 KST보다 -9시간)</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="nb">rm</span> /etc/localtime
    <span class="nb">ln</span> <span class="nt">-s</span> /usr/share/zoneinfo/Asia/Seoul /etc/localtime
</pre></table></code></div></div><ul><li>확인 및 재부팅</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    <span class="nb">date
    	</span>2021. 04. 28. <span class="o">(</span>수<span class="o">)</span> 10:29:51 KST
    reboot
</pre></table></code></div></div><h1 id="설치">설치</h1><hr /><h2 id="패키지-설치"><span class="mr-2">패키지 설치</span><a href="#패키지-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p>MariaDB 버전별 RPM 다운로드</p><p><a href="https://downloads.mariadb.org/mariadb/repositories/#mirror=yongbok">https://downloads.mariadb.org/mariadb/repositories/#mirror=yongbok</a></p><li><p>MariaDB 버전별 OS 호환성 비교 <a href="https://mariadb.com/docs/deploy/os-compatibility/#mariadb-community-server">https://mariadb.com/docs/deploy/os-compatibility/#mariadb-community-server</a></p></ul><h3 id="1-mariadb-저장소-추가"><span class="mr-2">1. [MariaDB] 저장소 추가</span><a href="#1-mariadb-저장소-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>CentOS 6.x 이하 또는 원하는 버전의 MariaDB를 설치해야 하는 경우 저장소 정보를 등록해야 한다.</p><ul><li>저장소 정보 파일을 열거나 생성한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    vim /etc/yum.repos.d/MariaDB.repo
</pre></table></code></div></div><ul><li>아래 내용을 추가한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>    <span class="c">## MariaDB 10.2</span>

    <span class="c"># MariaDB 10.2 CentOS repository list - created 2018-01-11 07:40 UTC</span>
    <span class="c"># http://downloads.mariadb.org/mariadb/repositories/</span>
    <span class="o">[</span>mariadb]
    name <span class="o">=</span> MariaDB
    baseurl <span class="o">=</span> http://yum.mariadb.org/10.2/centos7-amd64
    <span class="nv">gpgkey</span><span class="o">=</span>https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
    <span class="nv">gpgcheck</span><span class="o">=</span>1
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>- baseurl : 본인이 원하는 스펙의 URL
    - 10.2 : 설치할 MariaDB의 버전
    - centos7-amd64 : 현재 리눅스 서버 스펙 - yum 저장소 정보를 갱신하고 확인한다.
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>    yum clean all
    yum repolist
    	mariadb                                        | 2.9 kB     00:00
    	mariadb/primary_db                             |  45 kB     00:02
    	mariadb             MariaDB                                    49
</pre></table></code></div></div><h3 id="2-패키지-설치"><span class="mr-2">2. 패키지 설치</span><a href="#2-패키지-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>yum으로 설치하는 경우</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    yum <span class="nb">install </span>MariaDB-server MariaDB-client
    또는
    yum <span class="nb">install </span>mysql-server mysql-client
</pre></table></code></div></div><ul><li>다운로드 받은 rpm 파일로 설치하는 경우</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>    rpm <span class="nt">-Uvh</span> MySQL-server-5.x.x-0.i386.rpm
    rpm <span class="nt">-Uvh</span> MySQL-client-5.x.x-0.i386.rpm

    <span class="c"># 이미 설치된 다른 패키지로 인해 충돌이 날 경우 force option 적용</span>
    rpm <span class="nt">-Uvh</span> MySQL-server-5.x.x-0.i386.rpm <span class="nt">--force</span>
    rpm <span class="nt">-Uvh</span> MySQL-client-5.x.x-0.i386.rpm <span class="nt">--force</span>
</pre></table></code></div></div><ul><li>설치 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    rpm <span class="nt">-qa</span> | <span class="nb">grep </span>MariaDB
    또는
    rpm <span class="nt">-qa</span> | <span class="nb">grep </span>mysql
</pre></table></code></div></div><ul><li>기본 데이터 경로 : <code class="language-plaintext highlighter-rouge">/var/lib/mysql</code><li>기본 로그 파일 경로 : <code class="language-plaintext highlighter-rouge">/var/log/mysqld.log</code><li>환경설정 파일 경로 : <code class="language-plaintext highlighter-rouge">/etc/my.cnf</code> 또는 <code class="language-plaintext highlighter-rouge">/etc/my.cnf.d/*.cnf</code><li>프로세스 파일 경로 : <code class="language-plaintext highlighter-rouge">/var/run/mysqld/mysqld.pid</code>, <code class="language-plaintext highlighter-rouge">/var/run/mysqld/mysqld.sock</code></ul><h3 id="3-서비스-실행"><span class="mr-2">3. 서비스 실행</span><a href="#3-서비스-실행" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong><a href="https://velog.io/@nugabox/MariaDB-MySQL-설치#10-서비스-데몬-구동">→ 서비스 데몬 구동</a></strong></p><h2 id="컴파일-설치"><span class="mr-2">컴파일 설치</span><a href="#컴파일-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="컴파일-설치를-위한-패키지-설치"><span class="mr-2">컴파일 설치를 위한 패키지 설치</span><a href="#컴파일-설치를-위한-패키지-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>yum 사용이 가능한 경우 컴파일 설치를 위한 기본적인 패키지를 설치한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yum <span class="nb">install </span>gcc gcc-c++ libtermcap-devel gdbm-devel zlib<span class="k">*</span> libxml<span class="k">*</span> freetype<span class="k">*</span> libpng<span class="k">*</span> libjpeg<span class="k">*</span> iconv flex gmp ncurses-devel cmake.x86_64 libaio
</pre></table></code></div></div><ul><li>MySQL 8.0 이상인 경우 cmake 3 이상, gcc 5.3 이상이 필요함.</ul><h3 id="1-소스-파일-다운로드"><span class="mr-2">1. 소스 파일 다운로드</span><a href="#1-소스-파일-다운로드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><p>MariaDB 다운로드 아카이브</p><p><a href="https://downloads.mariadb.org/mariadb/+releases/">https://downloads.mariadb.org/mariadb/+releases/</a></p><li><p>MySQL 다운로드 아카이브</p><p><a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><li><p>다운로드 아카이브에서 원하는 버전의 <code class="language-plaintext highlighter-rouge">Source</code> 파일을 서버에 업로드 또는 <code class="language-plaintext highlighter-rouge">[wget](https://www.notion.so/CentOS-4ecdbaeac3c5451089130c15a677fcf2)</code>으로 다운로드 받는다.</p></ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="nb">cd</span> /usr/local/src
    wget https://downloads.mysql.com/archives/get/file/mysql-5.7.20.tar.gz
</pre></table></code></div></div><h3 id="2-압축-해제-및-빌드-디렉토리-생성"><span class="mr-2">2. 압축 해제 및 빌드 디렉토리 생성</span><a href="#2-압축-해제-및-빌드-디렉토리-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">tar </span>zxvf mysql-5.7.20.tar.gz
<span class="nb">mkdir </span>build-mysql
<span class="nb">cd </span>build-mysql
</pre></table></code></div></div><h3 id="3-사용자-생성"><span class="mr-2">3. 사용자 생성</span><a href="#3-사용자-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>groupadd mysql
useradd <span class="nt">-g</span> mysql mysql
</pre></table></code></div></div><h3 id="4-컴파일-옵션-설정"><span class="mr-2">4. 컴파일 옵션 설정</span><a href="#4-컴파일-옵션-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>컴파일 옵션 변경 시 컴파일 옵션에 <code class="language-plaintext highlighter-rouge">-D</code>를 붙이고 값을 입력한다.<li><strong>한 서버에 2개 이상의 MySQL/MariaDB 설치 시 꼭 다르게 설정해야 할 옵션</strong><ul><li>설치 베이스 경로 (CMAKE_INSTALL_PREFIX)<li>데이터 경로 (MYSQL_DATADIR)<li>Sock 파일 위치 (MYSQL_UNIX_ADDR)<li>포트 (MYSQL_TCP_PORT)<li>my.cnf (INSTALL_SYSCONFDIR) : 설치 후 각각 다른 위치에 생성하여 사용한다.</ul><li>버전별 테스트한 옵션은 아래와 같다.<ul><li>MariaDB 10.0<li>MariaDB 10.2<li>MySQL 5.7<li><p>MySQL 8.0</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>    cmake3 <span class="se">\</span>
    		<span class="nt">-DCMAKE_INSTALL_PREFIX</span><span class="o">=</span>/usr/local/mysql-8.0 <span class="se">\</span>
    		<span class="nt">-DMYSQL_DATADIR</span><span class="o">=</span>/usr/local/mysql-8.0/data <span class="se">\</span>
    		<span class="nt">-DSYSCONFDIR</span><span class="o">=</span>/usr/local/mysql-8.0<span class="se">\</span>
    		<span class="nt">-DMYSQL_USER</span><span class="o">=</span>mysql <span class="se">\</span>
    		<span class="nt">-DWITH_MYISAM_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_INNOBASE_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_PARTITION_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_FEDERATED_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_BLACKHOLE_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_MEMORY_STORAGE_ENGINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_READLINE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DMYSQL_UNIX_ADDR</span><span class="o">=</span>/tmp/mysql.sock <span class="se">\</span>
    		<span class="nt">-DMYSOL_TCP_PORT</span><span class="o">=</span>3306 <span class="se">\</span>
    		<span class="nt">-DENABLED_LOCAL_INFILE</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DENABLE_DOWNLOADS</span><span class="o">=</span>1
    		<span class="nt">-DWITH_EXTRA_CHARSETS</span><span class="o">=</span>all <span class="se">\</span>
    		<span class="nt">-DDEFAULT_CHARSET</span><span class="o">=</span>utf8 <span class="se">\</span>
    		<span class="nt">-DDEFAULT_COLLATION</span><span class="o">=</span>utf8_general_ci <span class="se">\</span>
    		<span class="nt">-DWITH_DEBUG</span><span class="o">=</span>0 <span class="se">\</span>
    		<span class="nt">-DMYSQL_MAINTAINER_MODE</span><span class="o">=</span>0 <span class="se">\</span>
    		<span class="nt">-DDOWNLOAD_BOOST</span><span class="o">=</span>1 <span class="se">\</span>
    		<span class="nt">-DWITH_BOOST</span><span class="o">=</span>/usr/include <span class="se">\</span>
</pre></table></code></div></div></ul><li>컴파일 옵션 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    ./cmake <span class="nt">-LH</span>
</pre></table></code></div></div><ul><li>컴파일 실패 시 CMakeCache.txt 파일 삭제</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    <span class="nb">rm</span> <span class="nt">-rf</span> CmakeCashe.txt
</pre></table></code></div></div><h3 id="5-컴파일된-파일-설치"><span class="mr-2">5. 컴파일된 파일 설치</span><a href="#5-컴파일된-파일-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>make <span class="o">&amp;&amp;</span> make <span class="nb">install</span>
</pre></table></code></div></div><h3 id="6-심볼릭-링크-생성-선택"><span class="mr-2">6. 심볼릭 링크 생성 (선택)</span><a href="#6-심볼릭-링크-생성-선택" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">cd</span> /usr/local/mysql-5.7.20
<span class="nb">ln</span> <span class="nt">-s</span> mysql-5.7.20 mysql
<span class="nb">ln</span> <span class="nt">-s</span> /usr/local/mysql/bin/mysql /usr/bin
</pre></table></code></div></div><h3 id="7-별도-디렉토리-생성-선택"><span class="mr-2">7. 별도 디렉토리 생성 (선택)</span><a href="#7-별도-디렉토리-생성-선택" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>용량 혹은 관리상의 문제로 Data 및 Log 등의 파일을 저장할 별도의 디렉토리가 필요한 경우, 아래와 같이 구성한다.</ul><p><img data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6daf2dbe-11cd-4de7-8b6a-286b33cc5040/_2021-04-28__3.44.15.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6daf2dbe-11cd-4de7-8b6a-286b33cc5040/_2021-04-28__3.44.15.png" data-proofer-ignore></p><ul><li>logs : 로그 파일<li>mysql-data : 데이터 폴더<li>mysql-ibdata : Innodb 데이터 폴더<li>tmp : 임시 폴더<li>명령어</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>    <span class="nb">mkdir</span> /data/mariadb
    <span class="nb">cd</span> /data/mariadb
    <span class="nb">mkdir </span>logs mysql-data mysql-ibdata tmp
    <span class="c">## 이미 초기 DB를 생성한 경우</span>
    <span class="nb">cp</span> /var/lib/mysql/<span class="k">*</span> mysql-data
    <span class="nb">chown</span> <span class="nt">-R</span> mysql.mysql /data/mariadb
</pre></table></code></div></div><h3 id="8-환경설정-파일-수정-선택"><span class="mr-2">8. 환경설정 파일 수정 (선택)</span><a href="#8-환경설정-파일-수정-선택" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>기본 파일 복사 (복사할 <code class="language-plaintext highlighter-rouge">my-*.cnf</code> 파일은 MySQL 메모리에 따라 결정된다.)<ul><li>my-huge.cnf : 1-2GB일 경우<li>my-large.cnf : 512MB 이상일 경우<li>my-medium.cnf : 32-64MB 사이일 경우<li>my-small.cnf : 64MB 이하일 경우</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    <span class="nb">cp</span> /usr/local/mysql/support-files/my-huge.cnf /etc/my.cnf
</pre></table></code></div></div><ul><li>기본 디렉토리에 초기 DB 생성 후 환경설정을 수정하고 관련 파일들을 이동하거나, 환경설정을 먼저 수정하고나서 초기 DB를 생성해도 상관없다.<li>MariaDB/MySQL의 환경설정은 <code class="language-plaintext highlighter-rouge">/etc/my.cnf</code>와 <code class="language-plaintext highlighter-rouge">[basedir]/my.cnf</code>를 순서대로 탐색하므로, 두 개 이상의 DB를 설치할 경우 <code class="language-plaintext highlighter-rouge">/etc/my.cnf</code>를 삭제하고, 각 디렉토리 안에 <code class="language-plaintext highlighter-rouge">my.cnf</code>를 복사한다.<li>최적화된<code class="language-plaintext highlighter-rouge">my.cnf</code> 샘플 (에러 발생 시 에러 로그를 확인해서 버전에 맞지 않는 항목을 제거한다)</ul><h3 id="9-초기-db-생성-및-권한-설정"><span class="mr-2">9. 초기 DB 생성 및 권한 설정</span><a href="#9-초기-db-생성-및-권한-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>생성된 MySQL 설치 폴더의 권한을 설정해 준다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="nb">chown</span> <span class="nt">-R</span> mysql.mysql /usr/local/mysql
    <span class="nb">chmod</span> <span class="nt">-R</span> 755 /usr/local/mysql
</pre></table></code></div></div><ul><li>초기 DB 생성 스크립트를 실행한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>    <span class="nb">cd</span> /usr/local/mysql-5.7.20/scripts
    ./mysql_install_db <span class="nt">--user</span><span class="o">=</span>mysql <span class="nt">--basedir</span><span class="o">=</span>/usr/local/mysql <span class="nt">--datadir</span><span class="o">=[</span>데이터폴더위치]

    <span class="c">## 7. 별도 디렉토리 생성을 DB 생성 이후에 했다면 모두 복사해준다.</span>
    <span class="nb">cp</span> <span class="nt">-R</span> <span class="o">[</span>현재 데이터 폴더 위치]/<span class="k">*</span> <span class="o">[</span>별도 데이터 폴더 위치]
    <span class="c"># 예) cp -R /usr/local/mysql/data /data/mariadb/mysql-data/</span>
</pre></table></code></div></div><ul><li>초기 DB 생성 후 설치 폴더 및 데이터 폴더에 다시 권한을 설정한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>    <span class="nb">chown</span> <span class="nt">-R</span> mysql.mysql /usr/local/mysql
    <span class="nb">chmod</span> <span class="nt">-R</span> 755 /usr/local/mysql
    <span class="nb">chown</span> <span class="nt">-R</span> mysql.mysql <span class="o">[</span>데이터폴더위치]
    <span class="nb">chmod</span> <span class="nt">-R</span> 755 <span class="o">[</span>데이터폴더위치]
</pre></table></code></div></div><h3 id="10-서비스-데몬-구동"><span class="mr-2">10. 서비스 데몬 구동</span><a href="#10-서비스-데몬-구동" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><code class="language-plaintext highlighter-rouge">mysqld_safe</code>을 실행한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>    <span class="c"># 컴파일 설치한 경우 bin 폴더 아래에 있는 데몬 실행</span>
    <span class="nb">cd</span> /usr/local/mysql/bin
    ./mysqld_safe &amp;

    <span class="c"># 패키지 설치한 경우</span>
    mysqld_safe &amp;
</pre></table></code></div></div><ul><li>2대 이상의 MySQL을 설치했거나, 별도의 디렉토리로 지정한 경우 옵션을 넣어 실행할 수 있다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>    ./mysqld_safe &amp; <span class="se">\</span>
    <span class="nt">--user</span><span class="o">=[</span>사용자] <span class="se">\</span>
    <span class="nt">--basedir</span><span class="o">=[</span>설치위치] <span class="se">\</span>
    <span class="nt">--datadir</span><span class="o">=[</span>데이터폴더위치] <span class="se">\</span>
    <span class="nt">--log-error</span><span class="o">=[</span>에러로그위치] <span class="se">\</span>
    <span class="nt">--pid-file</span><span class="o">=[</span>pid파일위치] <span class="se">\</span>
    <span class="nt">--socket</span><span class="o">=[</span>socket파일위치] <span class="se">\</span>
    <span class="nt">--port</span><span class="o">=[</span>포트]
</pre></table></code></div></div><ul><li>프로세스 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    ps <span class="nt">-ef</span> | <span class="nb">grep </span>mysql
</pre></table></code></div></div><ul><li>정상적으로 구동되지 않을 시 로그를 확인한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    <span class="nb">cat</span> /var/log/mysqld.log
</pre></table></code></div></div><ul><li>mysql 콘솔에 접속</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>    <span class="c"># 초기 비밀번호가 설정되지 않은 경우 -p 옵션을 붙이지 않는다.</span>
    mysql <span class="nt">-uroot</span>

    	Welcome to the MySQL monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span><span class="nb">.</span>
    	Your MySQL connection <span class="nb">id </span>is 1
    	Server version: 5.x.x-community-log MySQL Community Edition <span class="o">(</span>GPL<span class="o">)</span>

    	Type <span class="s1">'help;'</span> or <span class="s1">'\h'</span> <span class="k">for </span>help. Type <span class="s1">'\c'</span> to clear the buffer.

    	mysql&gt;
</pre></table></code></div></div><h3 id="11-root-계정-설정"><span class="mr-2">11. root 계정 설정</span><a href="#11-root-계정-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>mysqladmin 이용</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    mysqladmin <span class="nt">-u</span> root password <span class="s1">'1234'</span>
</pre></table></code></div></div><ul><li>MySQL 5.x</ul><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>    <span class="k">update</span> <span class="k">user</span> <span class="k">set</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">(</span><span class="s1">'1234'</span><span class="p">)</span> <span class="k">where</span> <span class="k">user</span><span class="o">=</span><span class="s1">'root'</span><span class="p">;</span>
    <span class="err">또는</span>
    <span class="k">update</span> <span class="k">user</span> <span class="k">set</span> <span class="n">authentication_string</span><span class="o">=</span><span class="n">password</span><span class="p">(</span><span class="s1">'1234'</span><span class="p">)</span> <span class="k">where</span> <span class="k">user</span><span class="o">=</span><span class="s1">'root'</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>MySQL 5.7 이상</ul><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="k">alter</span> <span class="k">user</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">identified</span> <span class="k">with</span> <span class="n">mysql_native_password</span> <span class="k">by</span> <span class="s1">'1234;
    flush privileges;
</span></pre></table></code></div></div><h3 id="12-시스템-서비스-등록"><span class="mr-2">12. 시스템 서비스 등록</span><a href="#12-시스템-서비스-등록" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>컴파일 설치의 경우 시스템 서비스에 직접 등록해야 사용할 수 있다.<li>CentOS 6.x : <code class="language-plaintext highlighter-rouge">support-file/mysql.server</code> 파일을 시스템 서비스 폴더에 복사한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>    <span class="nb">cp</span> /usr/local/mysql/support-file/mysql.server /etc/init.d

    <span class="c"># 확인</span>
    service mysql status
</pre></table></code></div></div><ul><li>CentOS 7.x : 아래 내용의 <code class="language-plaintext highlighter-rouge">/usr/lib/systemd/system/mysql.service</code> 파일을 저장한다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>    vim /usr/lib/systemd/system/mysql.service

    	<span class="o">[</span>Unit]
    	<span class="nv">Description</span><span class="o">=</span>MySQL Community Server
    	<span class="nv">After</span><span class="o">=</span>network.target
    	<span class="nv">After</span><span class="o">=</span>syslog.target

    	<span class="o">[</span>Install]
    	<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
    	<span class="nv">Alias</span><span class="o">=</span>mysql.service

    	<span class="o">[</span>Service]
    	<span class="nv">user</span><span class="o">=</span>mysql
    	<span class="nv">group</span><span class="o">=</span>mysql

    	<span class="c"># Start main service</span>
    	<span class="nv">ExecStart</span><span class="o">=</span>/usr/local/mysql/bin/mysqld_safe <span class="nt">--user</span><span class="o">=</span>mysql

    	<span class="c"># Give up if ping don't get an answer</span>
    	<span class="nv">TimeoutSec</span><span class="o">=</span>300
    	<span class="nv">PrivateTmp</span><span class="o">=</span><span class="nb">false</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="c"># 시스템 서비스 데몬 Reload</span>
    systemctl daemon-reload
</pre></table></code></div></div><h3 id="troubleshooting"><span class="mr-2">TroubleShooting</span><a href="#troubleshooting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>사용자 관련 : root 계정으로 에러 발생 시 권한을 부여한 사용자로 재시도<li>권한 관련 : socket 파일(보통 <code class="language-plaintext highlighter-rouge">/tmp/mysql.sock</code> 또는 <code class="language-plaintext highlighter-rouge">/var/run/mysql.sock</code>)에 권한 부여<li>Socket 지정 : <code class="language-plaintext highlighter-rouge">-S</code> 옵션으로 지정<li>my.cnf 지정 : <code class="language-plaintext highlighter-rouge">--defaults-data=[my.cnf위치]</code> 옵션으로 지정</ul><h1 id="서비스-구동">서비스 구동</h1><hr /><ul><li>서비스 시작 (서비스 네임 <code class="language-plaintext highlighter-rouge">mysql</code> 또는 <code class="language-plaintext highlighter-rouge">mysqld</code> 확인)</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>    <span class="c"># CentOS 6.x</span>
    service mysql start

    <span class="c"># CentOS 7.x</span>
    systemctl start mysql
</pre></table></code></div></div><ul><li>부팅시 자동 재시작</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    <span class="c"># CentOS 6.x</span>
    chkconfig mysql on
    chkconfig <span class="nt">--list</span> mysql

    <span class="c"># CentOS 7.x</span>
    systemctl <span class="nb">enable </span>mysql
    systemctl status mysql <span class="o">(</span>Loaded 맨 마지막에 enabled 확인<span class="o">)</span>
</pre></table></code></div></div><ul><li>포트 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    netstat <span class="nt">-anp</span> | <span class="nb">grep </span>mysql | <span class="nb">grep</span> <span class="s2">"LISTEN "</span>
    	tcp     0      0 :::3306       :::<span class="k">*</span>         LISTEN      9999/mysqld
</pre></table></code></div></div><ul><li>버전 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    mysql <span class="nt">--version</span>
</pre></table></code></div></div><ul><li>콘솔 접속</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    mysql <span class="nt">-uroot</span> <span class="nt">-p</span>
</pre></table></code></div></div><ul><li>보안 설정 (선택)</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>    mysql_secure_installation
</pre></table></code></div></div><ul><li>현재 계정 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    use mysql<span class="p">;</span>
    // mysql 5.x 는 <span class="s2">"password"</span> 또는 <span class="s2">"authentication_string"</span>로 확인합니다.
    mysql&gt; <span class="k">select </span>host, user, password from user<span class="p">;</span>
    mysql&gt; <span class="k">select </span>host, user, authentication_string from user<span class="p">;</span>

    // mysql 8.x
    mysql&gt; <span class="k">select </span>host, user, authentication_string from user<span class="p">;</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dbms/'>DBMS</a>, <a href='/categories/mariadb-mysql/'>MariaDB/MySQL</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mariadb/" class="post-tag no-text-decoration" >mariadb</a> <a href="/tags/mysql/" class="post-tag no-text-decoration" >mysql</a> <a href="/tags/db/" class="post-tag no-text-decoration" >db</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><script src="//developers.kakao.com/sdk/js/kakao.min.js"></script> <script> var imgUrl = ''; var imgOpengraph = 'https://nugabox.github.io/assets/img/common/metaimage.png'; var $imgs = $('.post-content img'); var imgUrlCnt = $imgs.length; if($imgs.length > 0) imgUrl = $imgs[0].dataset.src; else imgUrl = imgOpengraph; Kakao.init("6227428dbe368051c80ba49a2fd0a5a2"); function sendLink() { Kakao.Link.sendCustom({ templateId: 76113, templateArgs: { title: "MariaDB / MySQL 설치", description: "", url : "/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/", imgurl: imgUrl, }, }); } </script><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="javascript:sendLink();" data-toggle="tooltip" data-placement="top" title="카카오톡 공유하기" rel="noopener" aria-label="카카오톡 공유하기"> <i class="fa-fw fas fa-comment"></i> </a> <a href="https://twitter.com/intent/tweet?text=MariaDB / MySQL 설치 - NUGALOG&amp;url=https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MariaDB / MySQL 설치 - NUGALOG&amp;u=https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://nugabox.github.io/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/&amp;text=MariaDB / MySQL 설치 - NUGALOG" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div><div class="comments"><h4><i class="fas fa-comment" style="margin-right:5px"></i> 댓글</h4></div><script src="https://utteranc.es/client.js" repo="nugaBox/nugabox.github.io" issue-term="pathname" theme="photon-dark" crossorigin="anonymous" async> </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7618512713500025" crossorigin="anonymous"></script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/sshpass-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%82%AC%EC%9A%A9%EB%B2%95/">sshpass 설치 및 사용법</a><li><a href="/posts/%EB%A7%A5-zsh-Oh-My-Zsh-iTerm2-%EC%84%B8%ED%8C%85/">맥 zsh + Oh My Zsh + iTerm2 세팅</a><li><a href="/posts/%EB%A7%88%ED%81%AC%EB%8B%A4%EC%9A%B4(Markdown)-%EB%AC%B8%EB%B2%95/">마크다운(Markdown) 문법</a><li><a href="/posts/MariaDB-MySQL-%EC%84%A4%EC%B9%98/">MariaDB / MySQL 설치</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/centos/">centos</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/github-pages/">github-pages</a> <a class="post-tag" href="/tags/iterm/">iterm</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/mariadb/">mariadb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/sshpass-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%82%AC%EC%9A%A9%EB%B2%95/"><div class="card-body"> <em class="timeago small" data-ts="1653654360" > 2022-05-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>sshpass 설치 및 사용법</h3><div class="text-muted small"><p> sshpass란 SSHPass는 클라이언트에서 서버로 ssh 접속 시 패스워드 요구 없이 할 수 있는 도구입니다. 클라이언트에서 키 생성(ssh-keygen)하여 서버로 배포(ssh-copy-id)합니다. ssh, scp 수행 시 배치모드로 패스워드를 전달하거나 스크립트에 패스워드를 기재하여 접속이 가능합니다. 설치 LINUX 1...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%A7%A5-zsh-Oh-My-Zsh-iTerm2-%EC%84%B8%ED%8C%85/"><div class="card-body"> <em class="timeago small" data-ts="1652026320" > 2022-05-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>맥 zsh + Oh My Zsh + iTerm2 세팅</h3><div class="text-muted small"><p> 설치 1. zsh 설치 zsh를 HomeBrew로 설치합니다. 1 brew install zsh 2. 설치경로 확인 1 2 which zsh #=&amp;gt; /usr/bin/zsh 3. 기본 sh 변경 1 chsh -s $(which zsh) 4. curl 설치 1 brew install curl 5. oh-my-zsh 설치 1 sh -c...</p></div></div></a></div><div class="card"> <a href="/posts/XenServer-XCP-ng-ISO-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B0%B1%EC%8B%A0/"><div class="card-body"> <em class="timeago small" data-ts="1651716720" > 2022-05-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>XCP-ng ISO 저장소 생성 및 갱신 방법</h3><div class="text-muted small"><p> 저장소 생성 XenServer 및 XCP-ng에서 운영체제를 설치할 ISO 파일을 사용하기 위해서는 먼저 ISO 저장소를 생성해야 합니다. sr-create 명령어를 사용하여 아래와 같이 옵션을 입력하고 저장소를 생성합니다. 1 2 3 4 5 6 7 8 9 xe sr-create name-label=&amp;lt;name&amp;gt; ty...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%A7%88%ED%81%AC%EB%8B%A4%EC%9A%B4(Markdown)-%EB%AC%B8%EB%B2%95/" class="btn btn-outline-primary" prompt="이전 글"><p>마크다운(Markdown) 문법</p></a> <a href="/posts/CentOS-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95/" class="btn btn-outline-primary" prompt="다음 글"><p>CentOS 초기 설정</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://nugabox.com">NUGA</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">All Rights Reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/centos/">centos</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/github-pages/">github-pages</a> <a class="post-tag" href="/tags/iterm/">iterm</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/mariadb/">mariadb</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5YTBXLHM1V"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5YTBXLHM1V'); }); </script>
